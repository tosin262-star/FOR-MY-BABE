    <script>
        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');
        let stars = [];

        function initStars() { 
            canvas.width = window.innerWidth; canvas.height = window.innerHeight; stars = [];
            for(let i=0; i<150; i++) {
                stars.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, size: Math.random()*2.5, blink: Math.random()*0.05, velX: (Math.random()-0.5)*0.2, velY: (Math.random()-0.5)*0.2 });
            }
        }

        function drawStars() {
            ctx.fillStyle = '#000'; ctx.fillRect(0,0,canvas.width, canvas.height);
            stars.forEach(s => { 
                s.x += s.velX; s.y += s.velY;
                if(s.x < 0) s.x = canvas.width; if(s.x > canvas.width) s.x = 0;
                if(s.y < 0) s.y = canvas.height; if(s.y > canvas.height) s.y = 0;
                ctx.fillStyle = `rgba(255,255,255,${Math.abs(Math.sin(Date.now()*s.blink*0.01))})`; 
                ctx.beginPath(); ctx.arc(s.x, s.y, s.size, 0, Math.PI*2); ctx.fill(); 
            });
            requestAnimationFrame(drawStars);
        }

        initStars(); drawStars();
        window.addEventListener('resize', initStars);

        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');

        function startExperience() {
            document.getElementById('song').play().catch(e => console.log("Audio play failed"));
            transitionSlide();
        }

        function transitionSlide() {
            const oldSlide = slides[currentSlide];
            const nextSlideIndex = currentSlide + 1;

            if (nextSlideIndex < slides.length) {
                const nextSlide = slides[nextSlideIndex];
                nextSlide.style.display = 'flex';
                nextSlide.style.opacity = '0';

                setTimeout(() => {
                    oldSlide.style.opacity = '0';
                    nextSlide.style.opacity = '1';
                    
                    const nextElements = nextSlide.querySelectorAll('img, p, h1, .cta-btn');
                    nextElements.forEach(el => el.style.opacity = '1');

                    // Replay button appears 3 seconds after Cheers screen settles
                    if (nextSlideIndex === slides.length - 1) {
                        const replayBtn = nextSlide.querySelector('.replay-btn');
                        if (replayBtn) {
                            setTimeout(() => { replayBtn.style.opacity = '1'; }, 3000); 
                        }
                    }
                }, 100);

                setTimeout(() => {
                    oldSlide.classList.remove('active');
                    oldSlide.style.display = 'none';
                    nextSlide.classList.add('active');
                    currentSlide = nextSlideIndex;

                    // Each slide stays for 9 seconds
                    if (currentSlide < slides.length - 2) {
                        setTimeout(transitionSlide, 9000); 
                    }
                }, 1600); 
            }
        }

        function igniteLove() {
            for (let i = 0; i < 70; i++) {
                setTimeout(() => {
                    const kiss = document.createElement('div'); kiss.className = 'kiss'; kiss.innerHTML = 'ðŸ’‹';
                    kiss.style.left = Math.random()*95+'vw'; kiss.style.bottom='-10vh';
                    document.body.appendChild(kiss); setTimeout(() => kiss.remove(), 3000);
                }, i * 150);
            }
            // Holds on the V-Day screen for 12 seconds instead of 30
            setTimeout(transitionSlide, 12000);
        }
    </script>
