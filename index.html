<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Babe</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:ital,wght@1,700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --bg: #000000; 
            --text-main: #ffffff; 
            --accent-red: #FF4D4D; 
        }
        
        body, html { 
            margin: 0; padding: 0; 
            background: var(--bg); 
            color: var(--text-main); 
            font-family: 'Inter', sans-serif; 
            height: 100vh; width: 100vw; 
            overflow: hidden; 
            display: flex; justify-content: center; align-items: center; 
        }
        
        #starCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        
        .slideshow-container { 
            position: relative; z-index: 10; width: 100%; height: 100%; 
            display: flex; justify-content: center; align-items: center; 
        }
        
        .slide { 
            position: absolute; width: 90%; max-width: 450px; 
            display: none; 
            flex-direction: column; justify-content: center; align-items: center; 
            text-align: center; 
        }
        
        .slide.active { display: flex; }
        
        /* Elements inside fade, container stays solid */
        .slide img, .slide p, .slide h1, .slide button { 
            opacity: 0; 
            transition: opacity 1s ease-in-out; 
        }
        
        .slide.active img, .slide.active p, .slide.active h1, .slide.active button { 
            opacity: 1; 
        }
        
        .content-stack { display: flex; flex-direction: column; align-items: center; width: 100%; }

        .img-container { 
            width: 100%; height: 400px; 
            display: flex; align-items: center; justify-content: center; 
            border: 4px solid var(--accent-red); 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(15px); 
            -webkit-backdrop-filter: blur(15px);
            border-radius: 40px; 
            margin-bottom: 30px; 
            padding: 12px; 
            box-sizing: border-box; 
            box-shadow: 0 10px 40px rgba(255, 77, 77, 0.2);
        }

        .img-container img { 
            max-width: 100%; 
            max-height: 100%; 
            border-radius: 28px; 
            object-fit: contain; 
        }
        
        h1 { 
            font-family: 'Playfair Display', serif; 
            font-size: 3rem; font-style: italic; 
            color: var(--accent-red); 
            margin-bottom: 20px; 
            text-shadow: 0 0 20px rgba(255, 77, 77, 0.2);
        }
        
        p { 
            font-size: 1.25rem; font-weight: 600; line-height: 1.5; letter-spacing: 0.5px; 
            margin: 0 auto; max-width: 90%; color: var(--text-main); 
        }
        
        .cta-btn { 
            background: var(--accent-red); color: #ffffff; border: none; 
            padding: 22px 50px; border-radius: 100px; 
            font-size: 1rem; font-weight: 600; text-transform: uppercase; 
            letter-spacing: 3px; cursor: pointer; margin-top: 40px; 
            transition: 0.3s; z-index: 100;
            display: inline-flex; align-items: center; justify-content: center; gap: 12px;
        }

        .replay-btn {
            background: transparent; color: rgba(255, 255, 255, 0.6); border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 12px 25px; border-radius: 50px; font-size: 0.8rem; font-weight: 400;
            margin-top: 30px; cursor: pointer; transition: 0.3s;
        }
        .replay-btn:hover { color: #fff; border-color: #fff; background: rgba(255, 255, 255, 0.1); }

        .cta-btn:hover { transform: scale(1.05); background: #e63946; box-shadow: 0 0 25px rgba(255, 77, 77, 0.4); }

        .kiss { position: fixed; z-index: 1000; font-size: 3.5rem; pointer-events: none; animation: flyUp 3s ease-out forwards; }
        @keyframes flyUp { 0% { transform: translateY(0) scale(0.5); opacity: 0; } 20% { opacity: 1; } 100% { transform: translateY(-110vh) rotate(35deg) scale(3.5); opacity: 0; } }
    </style>
</head>
<body>
    <canvas id="starCanvas"></canvas>
    <audio id="song" loop preload="auto"><source src="music.mp3" type="audio/mpeg"></audio>

    <div class="slideshow-container">
        <div class="slide active">
            <h1>From Me to You</h1>
            <p>There are things in this world that are rare and then there's you.</p>
            <button class="cta-btn" onclick="startExperience()">Open Message</button>
        </div>

        <div class="slide"><p>Trillions of stars,<br>yet my eyes only ever look for one.</p></div>

        <div class="slide"><div class="content-stack"><div class="img-container"><img src="her1.jpeg"></div><p>Somehow, against all odds, I got the chance to love you.</p></div></div>
        <div class="slide"><div class="content-stack"><div class="img-container"><img src="her2.jpeg"></div><p>And I plan on spending the rest of my forever doing exactly that.</p></div></div>
        <div class="slide"><div class="content-stack"><div class="img-container"><img src="her3.jpeg"></div><p>Every single day, I cannot believe how lucky I am...</p></div></div>
        <div class="slide"><div class="content-stack"><div class="img-container"><img src="her4.jpeg"></div><p>to get to spend this life with you.</p></div></div>
        <div class="slide"><div class="content-stack"><div class="img-container"><img src="her5.jpeg"></div><p>I love you more than all the space in the universe can contain.</p></div></div>

        <div class="slide">
            <h1>Happy Valentine's Day ‚ù§Ô∏è</h1>
            <button class="cta-btn" onclick="igniteLove()">Click me <span>üíã</span></button>
        </div>

        <div class="slide">
            <div class="content-stack">
                <div class="img-container"><img src="cheers.jpeg"></div>
                <p style="letter-spacing: 12px; color: var(--accent-red);">CHEERS TO US</p>
                <button class="replay-btn" onclick="location.reload()">Watch Again</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');
        let stars = [];

        function initStars() { 
            canvas.width = window.innerWidth; canvas.height = window.innerHeight; stars = [];
            for(let i=0; i<150; i++) {
                stars.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, size: Math.random()*2.5, blink: Math.random()*0.05, velX: (Math.random()-0.5)*0.2, velY: (Math.random()-0.5)*0.2 });
            }
        }

        function drawStars() {
            ctx.fillStyle = '#000'; ctx.fillRect(0,0,canvas.width, canvas.height);
            stars.forEach(s => { 
                s.x += s.velX; s.y += s.velY;
                if(s.x < 0) s.x = canvas.width; if(s.x > canvas.width) s.x = 0;
                if(s.y < 0) s.y = canvas.height; if(s.y > canvas.height) s.y = 0;
                ctx.fillStyle = `rgba(255,255,255,${Math.abs(Math.sin(Date.now()*s.blink*0.01))})`; 
                ctx.beginPath(); ctx.arc(s.x, s.y, s.size, 0, Math.PI*2); ctx.fill(); 
            });
            requestAnimationFrame(drawStars);
        }

        initStars(); drawStars();
        window.addEventListener('resize', initStars);

        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');

        function startExperience() {
            const audio = document.getElementById('song');
            audio.play().catch(e => console.log("Audio block bypass required"));
            transitionSlide();
        }

        function transitionSlide() {
            const currentElements = slides[currentSlide].querySelectorAll('img, p, h1, button');
            currentElements.forEach(el => el.style.opacity = '0');

            setTimeout(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide++;
                if (currentSlide < slides.length) {
                    slides[currentSlide].classList.add('active');
                    const nextElements = slides[currentSlide].querySelectorAll('img, p, h1, button');
                    nextElements.forEach(el => el.style.opacity = '0');
                    
                    setTimeout(() => { 
                        nextElements.forEach(el => el.style.opacity = '1'); 
                    }, 50);

                    // FIXED: Only trigger next transition if it's not the final slide
                    if (currentSlide < slides.length - 1) {
                        setTimeout(transitionSlide, 5500);
                    }
                }
            }, 1000);
        }

        function igniteLove() {
            for (let i = 0; i < 65; i++) {
                setTimeout(() => {
                    const kiss = document.createElement('div'); kiss.className = 'kiss'; kiss.innerHTML = 'üíã';
                    kiss.style.left = Math.random()*95+'vw'; kiss.style.bottom='-10vh';
                    document.body.appendChild(kiss); setTimeout(() => kiss.remove(), 3000);
                }, i * 110);
            }
            setTimeout(transitionSlide, 4500);
        }
    </script>
</body>
</html>
